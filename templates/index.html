<!DOCTYPE html>
<html lang="tr">
<head>
    <title>Software News</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <link rel="stylesheet" type="text/css" href="/static/style.css">
</head>
<body>
 
    <div id="dÃ¼zenbar">
        <div id="bar">
            <img id="logo" src="/static/png/logo.png">
            <input type="text" id="searchBox" placeholder="Arama YapÄ±nÄ±z" onkeyup="searchLanguages()">
            <div id="darkmod">
                <span class="theme-mode">
                    <a role="button" id="themeToggle" title="Tema DeÄŸiÅŸtir" href="javascript:void(0);">ðŸŒ“
                      <i id="themeIcon" class="fas fa-sun"></i></a> 
                </span>
            </div>
            <div id="giriÅŸbar">
                <nav>
                    {{if .LoggedIn}}
                        <a href="/myprofil" class="button">Profil</a>
                        <a href="/logout" class="button">Log Out</a>
                        <script>
                            const welcomePopup = document.createElement('div');
                            welcomePopup.innerHTML = `
                                <div id="welcomePopup" style="position: fixed; top: 0; left: 0; width: 100%; height: 15%;  display: flex; justify-content: center; align-items: center; z-index: 9999;">
                                    <div id="popup" style="background-color: white; padding: 10px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.3); color: black;">
                                        <h4>HoÅŸ geldiniz!</h4>
                                        <p>Sitemize giriÅŸ yaptÄ±ÄŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r ederiz.</p>
                                    </div>
                                </div>
                            `;
                            document.body.appendChild(welcomePopup);
                        
                            // Tema moduna gÃ¶re popup rengini ayarla
                            const popupElement = welcomePopup.querySelector('#popup');
                            const theme = localStorage.getItem("tema") || "light"; // EÄŸer tema daha Ã¶nce kaydedilmiÅŸse kullan, yoksa "light"
                            if (theme === "dark") {
                                popupElement.style.backgroundColor = "rgb(239, 242, 246)";
                                popupElement.style.color = "black";
                            } else {
                                popupElement.style.backgroundColor = "rgb(20, 25, 31)";
                                popupElement.style.color = "white";
                            }
                        
                            // Pop-up'Ä± kapatmak iÃ§in bir zamanlayÄ±cÄ± kullan
                            setTimeout(() => {
                                welcomePopup.remove();  // Pop-up'Ä± kapat
                            }, 1500);  
                        </script>
                        
                    {{else}}
                        <a href="/login" class="button">Log In</a>
                        <a href="/register" class="button">Register</a>
                    {{end}}
                </nav>
            </div>
        </div>
    </div>
    
    <div id="gÃ¶rÃ¼nmezbar"></div>
    <div id="left">
        <a id="centerolustur" href="{{if .LoggedIn}}/createPost{{else}}/login{{end}}">
            {{if .LoggedIn}}
                Create a new post
            {{else}}
                create a new post
            {{end}}
        </a>
        
        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"> <img src="/static/png/database.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±">Veri TabanÄ±</div>
        </div>

        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"><img src="/static/png/coding.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±">Programlama</div>
        </div>

        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"><img src="/static/png/artificial-intelligence.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±">Yapay Zeka</div>
        </div>

        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"><img src="/static/png/ghost.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±">Oyun MotorlarÄ±</div>
        </div>

        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"><img src="/static/png/robot.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±">Robotik Sistemler</div>
        </div>

        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"><img src="/static/png/structure.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±"> React Native</div>
        </div>

        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"> <img src="/static/png/cyber-criminal.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±">Cyber Security</div>
        </div>
    </div>

    <div id="center">
        <div id="filtrecont">
            <div id="filtre">En Yeni</div>
            <div id="filtre">Ã‡Ã¶zÃ¼lmÃ¼ÅŸ</div>
            <div id="filtre"></div>
            <div id="filtre"></div>
        </div>
        <div id="centercont">
            {{range .Posts}}
            <div class="post">
                <div id="centerprofilcont">
                    <div id="profil">
                        <img width="80%" height="100%" src="/static/png/pp.png">
                    </div>
                    <div id="name">
                       {{.Username}}
                    </div>
                
                </div>
                    <div id="centersorubaslik">
                        <ul><li> <h3><a href="/viewPost?id={{.ID}}">{{.Title}}</a></h3> </li></ul>
                        <div id="centerlike">
                             <ul><li> {{.LikeCount}} Likes {{.DislikeCount}} Dislikes</li></ul>
                        </div>   
                        <ul><li> {{.CreatedAtFormatted}} </li></ul>
                    </div>
                    <div id="centersorukatagori">
                        <p>Kategori</p>
                    </div>
                    <!-- GÃ¶nderi silme formu -->
                    <form action="/deletePost" method="post">
                        <input type="hidden" name="post_id" value="{{.ID}}">
                        <button type="submit">Delete Post</button>
                    </form>
            </div>
            {{end}}
       </div> 
    </div>

    <script src="/static/scripts.js"></script>

    <script>
        let tema = localStorage.getItem("tema") || "light"; // EÄŸer tema daha Ã¶nce kaydedilmiÅŸse kullan, yoksa "light"
        
        // Sayfa yÃ¼klenirken temayÄ± ayarla
        document.body.classList.add(tema + "-mode"); // Varsa "light-mode" veya "dark-mode" ekle

        document.querySelector("#themeToggle").addEventListener("click", () => {
            tema = tema === "light" ? "dark" : "light";

            localStorage.setItem("tema", tema); // DeÄŸiÅŸen temayÄ± localStorage'a kaydet

            document.body.classList.remove("light-mode", "dark-mode"); // Ã–nceki sÄ±nÄ±flarÄ± temizle
            document.body.classList.add(tema + "-mode"); // Yeni tema sÄ±nÄ±fÄ±nÄ± ekle
        });
    </script>

    <script>
        // Ã‡Ä±kÄ±ÅŸ yap butonuna tÄ±klandÄ±ÄŸÄ±nda onay popup'Ä± gÃ¶ster
        document.querySelector('a[href="/logout"]').addEventListener('click', function(event) {
            event.preventDefault(); // BaÄŸlantÄ±nÄ±n varsayÄ±lan davranÄ±ÅŸÄ±nÄ± engelle (sayfayÄ± yenileme)
            
            // Onay popup'Ä±nÄ± gÃ¶ster
            if (confirm('Are you sure you want to log out?')) {
                // KullanÄ±cÄ± evet derse, logout sayfasÄ±na git
                window.location.href = this.getAttribute('href');
            } else {
                // KullanÄ±cÄ± hayÄ±r derse, popup'Ä± kapat
                // Ä°ÅŸlemi durdurmak iÃ§in gerekli deÄŸil, sadece bir geri bildirim olarak eklenir
            }
        });
    </script>
    
</body>
</html>